!function(e){e.fn.wowWizard=function(o){"use strict";function t(e){console.error("Warning: "+e)}function i(){var e=w.settings.steps[B];if(e.isDependent&&(e=r(e)),!e)throw new Error("Wrong dependency accross the steps.");if(!m.isStepTypeAllowed(e))throw new Error("Step type is not allowed: "+e.type);var o=v(e);w.html(o).find(".wow-wizard-content").css("opacity","0"),a(e,o),F.apply(o);var t="multiple_image_choice"==e.type?1e3:300;setTimeout(function(){w.find(".wow-wizard-content").animate({opacity:1},500),w.find(".loader").fadeOut(200)},t),u(e),x.update()}function r(e){for(var o=0;o<e.steps.length;o++){var t=e.steps[o],i=w.settings.steps[t.triggerStep];if(i.given_answer==t.triggerAnswer)return t}}function n(e){for(var o=[],t=B+1;t<=b;t++){var i=w.settings.steps[t];if(i.isDependent)for(var r=!1,n=0;n<i.steps.length&&!r;n++)i.steps[n].triggerStep==B&&(o.push(t),r=!0)}if(o.length>0){var a=1==o.length?"Step ":"Steps ";a+=o+" will change.",alert(a),b=o[0]}}function a(o,t){var i=t.find(".wow-wizard-step-indicator");i.each(function(o){var t=e(this).data("step");b>t&&e(this).find(".step-id").html('<div class="check"></div>'),B==t&&e(this).addClass("visited"),e(this).click(function(){l(e(this))})});var r=t.find("#wow-alert");r.fadeOut(0);var n=t.find("#wow-wizard-next-step");if(n.click(function(){c()}),e("div.single-choice-button").click(function(){e(this).data("selected",!0),e(this).data("selected"),c()}),"form"==o.type&&e(w).bind("keypress",function(e){var o=e.keyCode||e.which;13==o&&c()}),"multiple_image_choice"==o.type){var a=w.find(".multiple-image-choice");a.each(function(o){var t=e(this);t.isAvailable=!0,t.click(function(){t.data("selected")?f("multiple_image_choice",t):h("multiple_image_choice",t)})})}}function c(){var e=w.settings.steps[B];return n(e),e.isDependent&&(e=r(e)),!!s(e)&&(++B>=w.settings.steps.length?(B--,p(w)):(B>b&&b++,i(w),w.settings.onNextStep()),!0)}function s(o){switch(o.type){case"single_choice":return w.find(".single-choice-button").each(function(o){e(this).data("selected")&&(c=e(this).data("value"))}),o.given_answer=c,m.debug&&console.log(o.given_answer),!0;case"multiple_choice":var t,i=[];return w.find(".multiple-choice-choice").each(function(){e(this).hasClass("active")&&i.push(e(this).data("value"))}),0==i.length?(console.log(w.settings.errors.multiple_choice),t=o.errors&&o.errors.required?o.errors.required:w.settings.errors.multiple_choice.required,d(o,t)):(o.given_answer=i,m.debug&&console.log(o.given_answer),!0);case"form":var t,r=w.find("input"),i=[],n=!1;return r.each(function(r){if(""!=e(this).val())i[r]=e(this).val();else if(e(this).data("required"))return n=!0,t=o.errors&&o.errors.required?o.errors.required:w.settings.errors.form.required,e(this).css("border-color","red"),!0;if("email"==e(this).attr("type")){var a=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return a.test(e(this).val())||(n=!0,e(this).css("border-color","red"),t=o.errors&&o.errors.email?o.errors.email:w.settings.errors.form.email),!0}}),o.given_answer=i,m.debug&&console.log(o.given_answer),!n||d(o,t);case"multiple_image_choice":var i=[],a=w.find(".multiple-image-choice");return a.each(function(o){e(this).data("selected")&&i.push(e(this).data("slug"))}),0!=i.length?(o.given_answer=i,m.debug&&console.log(o.given_answer),!0):(t=o.errors&&o.errors.required?o.errors.required:w.settings.errors.multiple_image_choice.required,d(o,t));case"textarea":var c=e("textarea").val();return c?o.given_answer=c:o.given_answer="",m.debug&&console.log(o.given_answer),!0}}function l(e){var o=e.data("step");if(!(o>b||B==o)){w.settings.steps[o];B=o,i(w),w.settings.onPrevStep()}}function d(e,o){var t=w.find("#wow-alert");return t.html(o),t.fadeIn(300),setTimeout(function(){t.fadeOut(300)},1500),!1}function u(o){if(o.given_answer)switch(o.type){case"single_choice":e(".single-choice-button").each(function(t){o.given_answer==e(this).data("value")&&e(this).find("i").fadeIn(200)});break;case"multiple_choice":e(".fancy-checkbox").each(function(t){var i=e(this).find("button");o.given_answer.indexOf(i.data("value"))!=-1&&x.selectButton(i)});break;case"form":e("input").each(function(t){o.given_answer[t]&&e(this).val(o.given_answer[t])});break;case"multiple_image_choice":var t=w.find(".multiple-image-choice");t.each(function(t){if(o.given_answer.indexOf(e(this).data("slug"))!=-1){var i=e(this);i.isAvailable=!0,h("multiple_image_choice",i)}});break;case"textarea":w.find("textarea").val(o.given_answer)}}function p(){w.html(g());var o={};e.each(w.settings.steps,function(e,t){var i=t.given_answer,r=t.name;if(t.isDependent)for(var n=0;n<t.steps.length;n++){var a=t.steps[n];if(a.given_answer){i=a.given_answer,r=a.name;break}}o[r]=i}),w.settings.onFinish(o)}function v(o){var t=e('<div class="wow-wizard-step" type="'+o.type+'"></div>');if(o.notes){var i=e('<div class="col-xs-9 wow-wizard-content"></div>');$notes=e('<div class="col-xs-3 wow-wizard-content"></div>'),$notes.html(o.notes),t.append($notes)}else var i=e('<div class="col-xs-12 wow-wizard-content"></div>');t.append(e('<div class="loader"></div>'));var r=e('<div class="wow-wizard-step-question"></div>');r.append(e('<h2 class="wow-wizard-step-question-title">'+o.questionTitle+"</h2>")),o.questionDescription?r.append(e('<p class="wow-wizard-step-question-description">'+o.questionDescription+"</p>")):null;var n=e('<div class="wow-wizard-step-answers"></div>');switch(o.type){case"single_choice":e.each(o.answers,function(t,i){n.append(e('<div class="single-choice-button" data-name="'+o.name+'" data-value="'+i.value+'"><i class="fa fa-check"></i>'+i.text+"</div>"))});break;case"multiple_choice":try{var a=e('<div class="multiple-choice-choices"></div>');e.each(o.answers,function(o,t){var i=e('<span class="fancy-checkbox"></span>');i.append(e('<button type="button" data-value="'+t.value+'" class="button multiple-choice-choice" data-checked="false" style="margin-right:10px;" data-color="info">'+t.text+"</button>")),i.append(e('<input style="display:none;" type="checkbox" name="'+t.value+'">')),a.append(i)}),n.append(a)}catch(c){console.log(c)}break;case"form":try{for(var s=e('<div class="input-row"></div>'),l=0;l<o.inputs.length;l++){var d=o.inputs[l],u=e('<input class="pull-left" name="'+d.name+'" type="'+d.type+'">');d.placeholder?u.attr("placeholder",d.placeholder):null;var p=e('<div class="input-col-6"></div>');p.append(u),d.required&&(p.prepend(e('<div class="star-icon">*</div>')),u.data("required",!0)),s.append(p)}n.append(s)}catch(c){throw new Error('Input array of a step type "form" cannot be empty.')}break;case"multiple_image_choice":try{for(var v=e('<div class="multiple-image-choices"></div>'),l=0;l<o.answers.length;l++){var g=o.answers[l],h=e('<div class="multiple-image-choice" data-slug="'+g.value+'"></div>'),f=e('<div class="multiple-image-container" style="background-image:url(\''+g.imageUrl+"')\"/>"),C=e("<p>"+g.text+"</p>"),F=e('<div class="circle-select"><div class="background"></div><div class="inner-circle-icon"></div></div>');h.append(f),h.append(C),h.append(F),v.append(h)}n.append(v)}catch(c){console.log(c.message)}break;case"textarea":n.append('<textarea name="'+o.name+'"></textarea>')}i.append(r),i.append(n),m.shouldHaveNextButton(o)&&i.append(e('<div id="wow-wizard-next-step" class="pull-right">'+w.settings.nextButtonText+"</div>")),i.append(e('<div id="wow-alert" style="display:none;"></div>'));for(var x=e('<div class="wow-wizard-step-indicators col-xs-12"></div>'),l=0;l<w.settings.steps.length;l++){var B=e('<div class="wow-wizard-step-indicator" data-step="'+l+'"><div class="step-id"><span>'+(l+1)+"</span></div><b>"+w.settings.steps[l].indicatorName+"</b></div>");x.append(B)}return t.prepend(i),t.prepend(x),t}function g(){var o=e('<div class="wow-wizard-last-step"><h1>Thanks for using WowWizard!</h1><p>We\'ve got all your information. Will reach you soon.</p><a href="#">RETURN HOME</a></div>');return o}function h(e,o){if(o.isAvailable)switch(e){case"room_choice":if(o.isCustom||(o.isAvailable=!1),o.css("color","white"),o.find("i").fadeIn(200,function(){o.isAvailable=!0,o.data("selected",!0)}),o.animate({backgroundColor:"#59BAFF"},200,null),o.isCustom){var t=o.find("input");t.css("color","white"),t.css("border-bottom","1px solid white")}break;case"multiple_image_choice":o.find(".circle-select").addClass("selected"),o.find(".circle-select .background").fadeIn(200),o.find(".circle-select .inner-circle-icon").fadeIn(200),o.data("selected",!0)}}function f(e,o){if(o.isAvailable)switch(e){case"room_choice":o.isCustom||(o.isAvailable=!1),o.css("color","#59BAFF"),o.animate({backgroundColor:"transparent"},200,null),o.find("i").fadeOut(200,function(){o.isAvailable=!0,o.data("selected",!1)}),o.isCustom&&(o.find("input").css("color","#59BAFF"),o.find("input").css("border-bottom","1px solid #59BAFF"));break;case"multiple_image_choice":o.find(".circle-select").removeClass("selected"),o.find(".circle-select .background").fadeOut(200),o.find(".circle-select .inner-circle-icon").fadeOut(200),o.data("selected",!1)}}e.fn.wowWizard.defaults={steps:[],theme:"pomegranate",loader:"../../img/loader.gif",errors:{form:{required:"You have to fill in all required fields.",email:"Wrong e-mail format."},multiple_choice:{required:"You have to choose at least one of the choices."},single_choice:{required:"You have to fill in all required fields."}},onNextStep:function(){},onPrevStep:function(){},onFinish:function(e){}};var C=e.extend({},e.fn.wowWizard.defaults,o);C.errors=e.extend({},e.fn.wowWizard.defaults.errors,o.errors),this.settings=C;var w=this,F=function(){var o={pomegranate:{activeIndicatorBackgroundColor:"#F44A56",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#69181E",circleColor:"#C23640",outlineColor:"#F44A56",lineColor:"#F44A56",activeButtonBackgroundColor:"#F44A56",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#F44A56",imageChoiceCircleBackgroundColor:"#FFB3B8"},blueberry:{activeIndicatorBackgroundColor:"#4068D6",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#204097",circleColor:"#204ABD",outlineColor:"#4068D6",lineColor:"#4068D6",activeButtonBackgroundColor:"#4068D6",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#4068D6",imageChoiceCircleBackgroundColor:"#A2B5EB"},peach:{activeIndicatorBackgroundColor:"#DB764F",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#7A2851",circleColor:"#7A2851",outlineColor:"#DB764F",lineColor:"#DB764F",activeButtonBackgroundColor:"#DB764F",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#DB764F",imageChoiceCircleBackgroundColor:"#9E1E5B"},cherry:{activeIndicatorBackgroundColor:"#CF3851",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#F0738A",circleColor:"#F0738A",outlineColor:"#CF3851",lineColor:"#CF3851",activeButtonBackgroundColor:"#CF3851",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#CF3851",imageChoiceCircleBackgroundColor:"#F0738A"},passionfruit:{activeIndicatorBackgroundColor:"#872945",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#5BA300",circleColor:"#5BA300",outlineColor:"#872945",lineColor:"#872945",activeButtonBackgroundColor:"#872945",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#872945",imageChoiceCircleBackgroundColor:"#5BA300"},coconut:{activeIndicatorBackgroundColor:"#5CD6FF",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#834820",circleColor:"#834820",outlineColor:"#5CD6FF",lineColor:"#5CD6FF",activeButtonBackgroundColor:"#5CD6FF",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#5CD6FF",imageChoiceCircleBackgroundColor:"#834820"},lime:{activeIndicatorBackgroundColor:"#2ECC71",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#69181E",circleColor:"#1D9A52",outlineColor:"#2ECC71",lineColor:"#2ECC71",activeButtonBackgroundColor:"#2ECC71",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#2ECC71",imageChoiceCircleBackgroundColor:"#71E0A0"},banana:{activeIndicatorBackgroundColor:"#F1C40F",activeIndicatorTextColor:"#FFF",questionAndAnswerTextColor:"#69181E",circleColor:"#F39C12",outlineColor:"#F1C40F",lineColor:"#F1C40F",activeButtonBackgroundColor:"#F1C40F",passiveButtonBackgroundColor:"#FFF",activeButtonTextColor:"#FFF",passiveButtonTextColor:"#000",buttonTextColor:"#FFF",imageChoiceBorderColor:"#F1C40F",imageChoiceCircleBackgroundColor:"#F9DA5F"}},i={material:{borderRadius:"0.2px"}},r=function(r,n){var a=w.settings.theme,c=o[a];a?c||(t("Theme choice "+a+" doesn't exist in the plugin."),c=o.pomegranate):(t("You should specify a custom theme of your taste."),c=o.pomegranate),r.find(".wow-wizard-step-indicator.visited .step-id").css("background-color",c.circleColor),r.find(".wow-wizard-step-indicator").css("color",c.activeIndicatorTextColor),r.find(".wow-wizard-step-indicator.visited").css("background-color",c.activeIndicatorBackgroundColor),r.find(".wow-wizard-step-indicator").filter(function(o){return!e(this).hasClass("visited")}).css("color",c.textColor),r.find(".wow-wizard-step-indicators").css("border-bottom","2px solid "+c.lineColor),r.find("#wow-wizard-next-step, .single-choice-button").css("background-color",c.activeButtonBackgroundColor),r.find("#wow-wizard-next-step, .single-choice-button").css("color",c.buttonTextColor),r.find(".multiple-image-choice .circle-select .background").css("background-color",c.imageChoiceCircleBackgroundColor),r.find(".multiple-image-choice, .multiple-image-choice .circle-select").css("border","2px solid "+c.imageChoiceBorderColor),r.find(".fancy-checkbox .button").css("background-color",c.passiveButtonBackgroundColor),r.find(".fancy-checkbox .button.active").css("background-color",c.activeButtonBackgroundColor),r.find(".multiple-image-choice .circle-select .background").css("background-color"),r.find(".input-col-6 .star-icon").css("color",c.outlineColor),r.find("input[type=text], textarea").css("outline","none"),r.find("input[type=text]:focus, textarea:focus").css({border:"2px solid "+c.outlineColor,"box-shadow":"0px 0px 5px 0px rgba(244,74,85,1);"}),r.find("input[type=text], input[type=email], textarea").focus(function(){e(this).css({border:"1px solid "+c.outlineColor,"-webkit-box-shadow":"0px 0px 5px 0px "+c.outlineColor,"box-shadow":"0px 0px 5px 0px "+c.outlineColor})}),r.find("input[type=text], input[type=email], textarea").blur(function(){e(this).css({border:"1px solid #BBB","-webkit-box-shadow":"none"})}),w.settings.style&&r.find("input, textarea, button, #wow-wizard-next-step, .multiple-image-choice, .single-choice-button, .wow-wizard-step-indicator, #wow-alert").css("border-radius",i[w.settings.style].borderRadius),r.find(".loader").css("background-image","url('"+w.settings.loader+"')")};return{apply:r,colors:o[w.settings.theme]}}(),m=function(){var e={shouldHaveNextButton:["form","multiple_choice","multiple_image_choice","textarea"],allowedStepTypes:["single_choice","form","multiple_choice","multiple_image_choice","textarea"]};return{shouldHaveNextButton:function(o){return e.shouldHaveNextButton.indexOf(o.type)!=-1},isStepTypeAllowed:function(o){return e.allowedStepTypes.indexOf(o.type)!=-1},debug:!1}}(),x=function(){function o(e,o){var t=o.is(":checked");e.data("state",t?"on":"off"),e.find(".state-icon").removeClass().addClass("state-icon "+C[e.data("state")].icon),t?e.addClass("active").css("background-color",F.colors.activeButtonBackgroundColor).css("color",F.colors.activeButtonTextColor):e.removeClass("active").css("background-color",F.colors.passiveButtonBackgroundColor).css("color",F.colors.passiveButtonTextColor)}function t(e,t){o(e,t),0==e.find(".state-icon").length&&e.prepend('<i class="state-icon '+C[e.data("state")].icon+'"></i>Â ')}function i(){e(".fancy-checkbox").each(function(){var i=e(this),r=i.find("button"),n=i.find("input:checkbox");r.data("color");r.unbind().on("click",function(){n.prop("checked",!n.is(":checked")),n.triggerHandler("change"),o(r,n)}),n.on("change",function(){o(r,n)}),t(r,n)})}return C={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}},{update:function(){i()},selectButton:function(e){i(),e.triggerHandler("click")}}}(),B=0,b=0;return i(this),w.update=function(){i()},w}}(jQuery);